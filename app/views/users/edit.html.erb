<% provide(:title, 'Editar Perfil') %>
<% provide(:header, 'Editar Perfil') %>
<% provide(:description, 'Aqui é possível alterar algumas informações do seu perfil.') %>
<% provide(:levels, 'Perfil, Editar') %>

<div class="box box-primary">
  <div class="box-header with-border">
    <h3 class="box-title">Olá <%= @user.name %>!</h3>
  </div><!-- /.box-header -->

  <%= render partial: 'layouts/form_errors', locals: { obj: @user } %>
  
  <!-- form start -->
  <%= form_for(@user, :url => { :action => "update" }, html: { class:"form-horizontal" }) do |f| %>
    <div class="box-body">

      <div class="form-group">
        <%= f.label :name, "Nome:", class: 'col-sm-2 control-label' %>
        <div class="col-sm-5">
          <%= f.text_field :name, class: "form-control", readonly: true %>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :email, "Email:", class: 'col-sm-2 control-label' %>
        <div class="col-sm-5">
          <%= f.text_field :email, class: "form-control", readonly: true %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2 control-label no-padding">
          <%= f.label :position, "Função:", class: 'col-sm-12' %>
          <i class='col-sm-12'>(Máximo 30 caracteres)</i>      
        </div>
        <div class="col-sm-5">
          <%= f.text_field :position, class: "form-control" %>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :avatar, "Imagem do perfil:", class: 'col-sm-2 control-label' %></br>
        <div class="col-sm-5">
          <div class="fileinput <%= fileinput_class(@user) %>" data-provides="fileinput">
            <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 160px; height: 160px;"><%= profile_image_normal %></div>
            <div>
              <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><%= f.file_field :avatar %></span>
              <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2 control-label no-padding">
          <%= f.label :password, "Nova senha:", class: 'col-sm-12' %>
          <i class='col-sm-12'>(Caso não deseje alterar a senha deixe esse campo em branco)</i>
        </div>
        <div class="col-sm-5">
          <%= f.password_field :password, :autocomplete => "off", class: "form-control", placeholder: "Digite a nova senha. (Mínimo 8 caracteres)" %>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :password_confirmation, "Confirmação da nova senha:", class: 'col-sm-2 control-label' %>
        <div class="col-sm-5">
          <%= f.password_field :password_confirmation, class: "form-control", placeholder: "Redigite a nova senha." %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2 control-label no-padding">
          <%= f.label :current_password, "Senha atual:", class: 'col-sm-12' %>
          <i class='col-sm-12'>(Precisamos do senha atual para confirmar a atualização)</i>
        </div>
        <div class="col-sm-5">
          <%= f.password_field :current_password, :autocomplete => "off", class: "form-control", placeholder: "Digite a senha atual." %>
        </div>
      </div>

      <div class="box-footer">
        <%= link_to fa_icon("reply", text: content_tag(:span, 'Voltar')), root_path, class: 'btn btn-primary' %>
        <%= button_tag( class: "btn btn-primary") do %>
          <%= fa_icon("refresh", text: content_tag(:span, "Atualizar")) %>
        <% end %>
      </div>
    </div>
  <% end %>
</div><!-- /.box -->